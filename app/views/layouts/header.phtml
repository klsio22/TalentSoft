<?php
use App\Models\User;
use Lib\Authentication\Auth;

$isAdmin = Auth::check() ? Auth::user()->role === 'admin' : false;
$bgColor = $isAdmin ? 'bg-blue-700' : 'bg-blue-600';
$homeRoute = $isAdmin ? route('home.admin') : route('home');
$logoutRoute = $isAdmin ? route('admin.logout') : route('users.logout');
$profileRoute = $isAdmin ? route('profile.edit') : route('profile.view');

$navItems = [
    ['route' => $homeRoute, 'text' => 'Home'],
];

if (Auth::check()) {
    // Adiciona Meu Perfil (rota diferente baseada no tipo de usuário)
    $navItems[] = ['route' => $profileRoute, 'text' => 'Meu Perfil'];

    // Itens específicos para admin
    if ($isAdmin) {
        $navItems[] = ['route' => route('register.admin'), 'text' => 'Cadastro de Funcionários'];
    }

    // Item comum para todos
    $navItems[] = ['route' => route('users.list'), 'text' => 'Listagem de Funcionários'];
}
?>

<?php if (Auth::check()): ?>
<header class="<?= $bgColor ?> text-white p-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Bem-vindo à TalentSoft</h1>
    <span class="text-sm">Olá,
      <?= htmlspecialchars(Auth::user()->name) ?>
    </span>
  </div>
  <nav aria-label="Main Navigation">
    <ul class="flex space-x-4">
      <?php foreach ($navItems as $item): ?>
      <li>
        <a href="<?= $item['route'] ?>" class="hover:underline" aria-label="<?= $item['text'] ?>">
          <?= $item['text'] ?>
        </a>
      </li>
      <?php endforeach; ?>
      <li>
        <form method="POST" action="<?= $logoutRoute ?>" class="inline">
          <button type="submit" class="hover:underline">Sair</button>
        </form>
      </li>
    </ul>
  </nav>
</header>
<?php endif; ?>
